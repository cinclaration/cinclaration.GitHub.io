
/* --------------------------------

HTML & CSS (Section)

-----------------------------------
*/


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Drift</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: black; /* Fallback for background */
        }

        .background-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://i.ibb.co/WGmkpNJ/file-Dkh-Jnzq1p6x-MPVGqah-KM3-F-1.webp');
            background-size: cover;
            background-repeat: repeat;
            z-index: -1;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }

        .scoreboard {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 24px;
            font-weight: bold;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .menu-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: orange;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 16px;
            color: white;
            z-index: 2;
        }
    </style>
</head>
<body>
    <div class="background-layer"></div>
    <canvas id="gameCanvas"></canvas>
    <div class="scoreboard">Score: <span id="score">0</span></div>
    <div class="scoreboard" style="top: 50px;">Time Left: <span id="timer">30 seconds</span></div>
    <button class="menu-button" id="menuButton">Menu</button>
</body>
</html>


/* --------------------------------

Begin Java (Section 2)

-----------------------------------
*/

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Resize canvas dynamically
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas(); // Set initial size

    // Parallax Background
    let backgroundOffset = 0;
    function updateBackground() {
        backgroundOffset += 1; // Adjust speed
        document.querySelector('.background-layer').style.backgroundPosition = `${backgroundOffset}px ${backgroundOffset}px`;
    }

    // UI Updates
    function updateUI() {
        document.getElementById('score').textContent = score;
        document.getElementById('timer').textContent = `${timeLeft} seconds`;
    }

    // Timer
    let timeLeft = 30;
    let score = 0;

    function startTimer() {
        setInterval(() => {
            if (timeLeft > 0) {
                timeLeft--;
                updateUI();
            } else {
                alert('Game Over! Try Again.');
                resetGame();
            }
        }, 1000);
    }

    // Reset Game
    function resetGame() {
        timeLeft = 30;
        score = 0;
        updateUI();
    }

    // Start Game Loop
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas
        updateBackground(); // Update background
        requestAnimationFrame(gameLoop); // Loop
    }

    // Start everything
    startTimer();
    gameLoop();
</script>



/* --------------------------------

Java (Section 3)

-----------------------------------
*/

<script>
    // Spaceship Variables
    const spaceship = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: 20,
        dx: 0,
        dy: 0,
        friction: 0.9,
        speed: 0.15,
    };

    // Draw Spaceship
    function drawSpaceship() {
        ctx.beginPath();
        ctx.arc(spaceship.x, spaceship.y, spaceship.radius, 0, Math.PI * 2);
        ctx.fillStyle = '#3498DB'; // Blue
        ctx.fill();
        ctx.closePath();
    }

    // Update Spaceship Position
    function updateSpaceship() {
        spaceship.dx *= spaceship.friction;
        spaceship.dy *= spaceship.friction;
        spaceship.x += spaceship.dx;
        spaceship.y += spaceship.dy;

        // Keep within bounds
        spaceship.x = Math.max(spaceship.radius, Math.min(canvas.width - spaceship.radius, spaceship.x));
        spaceship.y = Math.max(spaceship.radius, Math.min(canvas.height - spaceship.radius, spaceship.y));

        drawSpaceship();
    }

    // Gyroscope Controls
    window.addEventListener('deviceorientation', (event) => {
        const { beta, gamma } = event;
        spaceship.dx += gamma * spaceship.speed;
        spaceship.dy += beta * spaceship.speed;
    });

    // Update Game Loop
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas
        updateBackground(); // Update background
        updateSpaceship(); // Update spaceship
        requestAnimationFrame(gameLoop); // Loop
    }

    gameLoop(); // Start the game loop
</script>






/* --------------------------------

Java (Section 4)

-----------------------------------
*/


<script>
    // Arrays for Game Objects
    const goals = []; // Collectible goals
    const obstacles = []; // Obstacles to avoid
    const powerUps = []; // Power-ups for bonuses

    // Images for Objects
    const goalImg = new Image();
    goalImg.src = 'https://i.imgur.com/Xqmv2mE.jpeg'; // Replace with your planet image

    const obstacleImg = new Image();
    obstacleImg.src = 'https://via.placeholder.com/50/E74C3C?text=Obstacle'; // Placeholder for obstacles

    const powerUpImg = new Image();
    powerUpImg.src = 'https://i.imgur.com/fINCGcJ.png'; // Replace with your power-up image

    // Function to Create Goals
    function createGoals() {
        goals.splice(0, goals.length); // Clear existing goals
        for (let i = 0; i < 5; i++) { // Spawn 5 goals
            let x, y;
            do {
                x = Math.random() * (canvas.width - 50) + 25;
                y = Math.random() * (canvas.height - 50) + 25;
            } while (goals.some(g => Math.hypot(g.x - x, g.y - y) < 50)); // Avoid overlap
            goals.push({ x, y, width: 30, height: 30 });
        }
    }

    // Function to Create Obstacles
    function createObstacles() {
        obstacles.splice(0, obstacles.length); // Clear existing obstacles
        for (let i = 0; i < 3; i++) { // Spawn 3 obstacles
            let x, y;
            do {
                x = Math.random() * (canvas.width - 50) + 25;
                y = Math.random() * (canvas.height - 50) + 25;
            } while (
                obstacles.some(o => Math.hypot(o.x - x, o.y - y) < 50) ||
                goals.some(g => Math.hypot(g.x - x, g.y - y) < 50)
            ); // Avoid overlap with goals
            obstacles.push({ x, y, radius: 20 });
        }
    }

    // Function to Create Power-Ups
    function createPowerUps() {
        powerUps.splice(0, powerUps.length); // Clear existing power-ups
        for (let i = 0; i < 2; i++) { // Spawn 2 power-ups
            let x, y;
            do {
                x = Math.random() * (canvas.width - 50) + 25;
                y = Math.random() * (canvas.height - 50) + 25;
            } while (
                powerUps.some(p => Math.hypot(p.x - x, p.y - y) < 50) ||
                goals.some(g => Math.hypot(g.x - x, g.y - y) < 50) ||
                obstacles.some(o => Math.hypot(o.x - x, o.y - y) < 50)
            ); // Avoid overlap
            powerUps.push({ x, y, radius: 15 });
        }
    }

    // Draw Goals
    function drawGoals() {
        goals.forEach(goal => {
            ctx.drawImage(goalImg, goal.x, goal.y, goal.width, goal.height);
        });
    }

    // Draw Obstacles
    function drawObstacles() {
        obstacles.forEach(obstacle => {
            ctx.beginPath();
            ctx.arc(obstacle.x, obstacle.y, obstacle.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#E74C3C'; // Red color
            ctx.fill();
            ctx.closePath();
        });
    }

    // Draw Power-Ups
    function drawPowerUps() {
        powerUps.forEach(powerUp => {
            ctx.drawImage(powerUpImg, powerUp.x - 15, powerUp.y - 15, 30, 30);
        });
    }

    // Collision Detection
    function checkCollisions() {
        // Check collisions with goals
        goals.forEach((goal, index) => {
            if (Math.hypot(spaceship.x - (goal.x + 15), spaceship.y - (goal.y + 15)) < spaceship.radius + 15) {
                score += 10; // Increase score
                goals.splice(index, 1); // Remove goal
            }
        });

        // Check collisions with obstacles
        obstacles.forEach(obstacle => {
            if (Math.hypot(spaceship.x - obstacle.x, spaceship.y - obstacle.y) < spaceship.radius + obstacle.radius) {
                score -= 10; // Deduct points
            }
        });

        // Check collisions with power-ups
        powerUps.forEach((powerUp, index) => {
            if (Math.hypot(spaceship.x - powerUp.x, spaceship.y - powerUp.y) < spaceship.radius + powerUp.radius) {
                score += 20; // Add bonus points
                powerUps.splice(index, 1); // Remove power-up
            }
        });
    }

    // Integrate Objects into Game Loop
    function gameLoop() {
        if (!isPaused) {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas
            updateBackground(); // Update the parallax background
            updateSpaceship(); // Update spaceship movement
            drawGoals(); // Draw goals
            drawObstacles(); // Draw obstacles
            drawPowerUps(); // Draw power-ups
            checkCollisions(); // Check for collisions
            drawUI(); // Draw the UI
        }
        requestAnimationFrame(gameLoop); // Keep looping
    }

    // Initialize Game Objects
    createGoals();
    createObstacles();
    createPowerUps();
    gameLoop(); // Start the game loop
</script>






/* --------------------------------

Java (Section 5)

-----------------------------------
*/

<script>
    // Level Variables
    let level = 1; // Start at level 1
    let timeLeft = 30; // Time for the current level in seconds
    let timerInterval; // Timer interval reference

    // Display Timer
    function updateTimerDisplay() {
        const timerElement = document.getElementById("timer");
        if (!timerElement) {
            const newTimer = document.createElement("div");
            newTimer.id = "timer";
            newTimer.style.position = "absolute";
            newTimer.style.top = "50px";
            newTimer.style.left = "50%";
            newTimer.style.transform = "translateX(-50%)";
            newTimer.style.color = "white";
            newTimer.style.fontSize = "24px";
            newTimer.style.fontWeight = "bold";
            newTimer.style.zIndex = "1";
            document.body.appendChild(newTimer);
        }
        document.getElementById("timer").textContent = `Time Left: ${timeLeft} seconds`;
    }

    // Start Timer
    function startTimer() {
        timeLeft = 30 + level * 5; // Add more time with each level
        updateTimerDisplay(); // Show initial time

        timerInterval = setInterval(() => {
            if (!isPaused) {
                timeLeft--;
                updateTimerDisplay();

                if (timeLeft <= 0) {
                    clearInterval(timerInterval); // Stop the timer
                    endLevel(); // Move to the next level
                }
            }
        }, 1000); // Update every second
    }

    // End Level
    function endLevel() {
        isPaused = true; // Pause the game
        clearInterval(timerInterval); // Stop the timer
        alert(`Level ${level} Complete! Get ready for Level ${level + 1}.`);
        nextLevel(); // Start the next level
    }

    // Move to the Next Level
    function nextLevel() {
        level++; // Increment the level
        timeLeft = 30 + level * 5; // Add more time for the next level
        spaceship.speed += 0.05; // Slightly increase gyroscopic sensitivity
        createGoals(); // Create new goals
        createObstacles(); // Create new obstacles
        createPowerUps(); // Create new power-ups
        isPaused = false; // Resume the game
        startTimer(); // Restart the timer
    }

    // Restart Game
    function restartGame() {
        level = 1; // Reset to level 1
        score = 0; // Reset score
        timeLeft = 30; // Reset timer
        spaceship.speed = 0.15; // Reset spaceship speed
        createGoals(); // Create initial goals
        createObstacles(); // Create initial obstacles
        createPowerUps(); // Create initial power-ups
        document.getElementById("score").textContent = score; // Reset score display
        isPaused = false; // Resume the game
        startTimer(); // Restart the timer
        gameLoop(); // Restart the game loop
    }

    // Initialize the Game with Timer and Levels
    restartGame();
</script>







/* --------------------------------

Java (Section 6)

-----------------------------------
*/

<script>
    const particles = []; // Array to store particle effects

    // Create Particles for Effects
    function createParticles(x, y, color) {
        for (let i = 0; i < 10; i++) {
            particles.push({
                x: x,
                y: y,
                dx: (Math.random() - 0.5) * 4, // Random x-direction velocity
                dy: (Math.random() - 0.5) * 4, // Random y-direction velocity
                radius: Math.random() * 4 + 2, // Random radius between 2 and 6
                color: color, // Particle color
                life: 30, // Particle lifespan in frames
            });
        }
    }

    // Update and Render Particles
    function updateParticles() {
        for (let i = particles.length - 1; i >= 0; i--) {
            const p = particles[i];
            p.x += p.dx; // Update position
            p.y += p.dy;
            p.life--; // Reduce lifespan

            if (p.life <= 0) {
                particles.splice(i, 1); // Remove particle when it expires
            } else {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.fill();
                ctx.closePath();
            }
        }
    }

    // Modify Collision Handling to Include Particle Effects
    function checkCollisions() {
        // Collisions with goals
        goals.forEach((goal, index) => {
            if (Math.hypot(spaceship.x - (goal.x + 15), spaceship.y - (goal.y + 15)) < spaceship.radius + 15) {
                score += 10; // Increase score
                createParticles(goal.x + 15, goal.y + 15, "#8E44AD"); // Purple particles for goals
                goals.splice(index, 1); // Remove goal
            }
        });

        // Collisions with obstacles
        obstacles.forEach(obstacle => {
            if (Math.hypot(spaceship.x - obstacle.x, spaceship.y - obstacle.y) < spaceship.radius + obstacle.radius) {
                score -= 10; // Deduct points
                createParticles(obstacle.x, obstacle.y, "#E74C3C"); // Red particles for obstacles
            }
        });

        // Collisions with power-ups
        powerUps.forEach((powerUp, index) => {
            if (Math.hypot(spaceship.x - powerUp.x, spaceship.y - powerUp.y) < spaceship.radius + powerUp.radius) {
                score += 20; // Add bonus points
                createParticles(powerUp.x, powerUp.y, "#F1C40F"); // Yellow particles for power-ups
                powerUps.splice(index, 1); // Remove power-up
            }
        });
    }

    // Add Fade Transitions for Level Changes
    let fadeOpacity = 0;
    let fadingIn = true;

    function drawFadeEffect() {
        if (fadingIn && fadeOpacity < 1) {
            fadeOpacity += 0.02; // Fade in
        } else if (!fadingIn && fadeOpacity > 0) {
            fadeOpacity -= 0.02; // Fade out
        }

        if (fadeOpacity > 0) {
            ctx.fillStyle = `rgba(0, 0, 0, ${fadeOpacity})`;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
    }

    function startFadeIn() {
        fadingIn = true;
        fadeOpacity = 0;
    }

    function startFadeOut() {
        fadingIn = false;
        fadeOpacity = 1;
    }

    // Update the Game Loop for Enhancements
    function gameLoop() {
        if (!isPaused) {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas
            updateBackground(); // Update parallax background
            updateSpaceship(); // Update spaceship movement
            drawGoals(); // Draw goals
            drawObstacles(); // Draw obstacles
            drawPowerUps(); // Draw power-ups
            updateParticles(); // Update particles
            checkCollisions(); // Handle collisions
            drawFadeEffect(); // Add fade effects
            drawUI(); // Draw the UI elements
        }
        requestAnimationFrame(gameLoop); // Continue the loop
    }

    // Restart the Game Loop with Enhancements
    restartGame();
</script>








/* --------------------------------

Java (additive 1)

-----------------------------------
*/
